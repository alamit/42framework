# **************************************************************************** #
#                                                                              #
#                                                         :::      ::::::::    #
#    Makefile_test                                      :+:      :+:    :+:    #
#                                                     +:+ +:+         +:+      #
#    By: alamit <marvin@42.fr>                      +#+  +:+       +#+         #
#                                                 +#+#+#+#+#+   +#+            #
#    Created: 2018/10/01 15:13:02 by alamit            #+#    #+#              #
#    Updated: 2018/10/01 20:12:49 by alamit           ###   ########.fr        #
#                                                                              #
# **************************************************************************** #

# This file has been autogenerated by the 42framework. Changing its content
# will affect the compilation behaviour of the test command.
# NAME SRC AND TEST42F variables will be exported – BREAKS could be – by the 
# test script.

OUT = $(NAME)

all: compile

compile:
	gcc -Wall -Werror -Wextra \
		-L$(TEST42F_DIR) -ltest42f \
		-I $(TEST42F_DIR)/include \
		-o $(NAME) $(SRC)

compile_debug:
	gcc -g -Wall -Werror -Wextra \
		-L$(TEST42F_DIR) -ltest42f \
		-I $(TEST42F_DIR)/include \
		-o $(NAME) $(SRC)

clean:
	rm -rf $(NAME)

test:
	export DYLD_FALLBACK_LIBRARY_PATH="$test42fdir/bin:$DYLD_FALLBACK_LIBRARY_PATH"
	./$(NAME)
	$(shell export DYLD_FALLBACK_LIBRARY_PATH=`echo $DYLD_FALLBACK_LIBRARY_PATH | sed -e 's/^[^:]*://g'`)

test_debug:
	lldb -f $(NAME)

ftest: compile test clean

ftest_debug: compile_debug test_debug clean


